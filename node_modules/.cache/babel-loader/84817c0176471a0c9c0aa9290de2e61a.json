{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\xtarg\\\\Desktop\\\\SystemAcountManager-main\\\\src\\\\components\\\\editService.component.js\";\nimport React, { Component } from \"react\";\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport axios from 'axios';\nimport Cookies from 'universal-cookie';\nimport $ from 'jquery';\nconst cookies = new Cookies();\nexport default class EditService extends Component {\n  constructor(props) {\n    super(props);\n    this.name = '';\n    this.price = '';\n    this.service = '';\n    this.id = '';\n    this.allServices = [];\n    this.onChangeService = this.onChangeService.bind(this);\n    this.onDelete = this.onDelete.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    axios.get('http://localhost:4000/students/services/', {\n      headers: {\n        authorization: 'Bearer ' + cookies.get('token')\n      }\n    }).then(res => {\n      res.data.map(service => $('#selectedService').append('<option>' + service.typeService + '</option>'));\n      res.data.map(service => this.allServices.push(service));\n      console.log(this.allServices[1]);\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  onChangeService(e) {\n    for (var i = 0; i < this.allServices.length; i++) {\n      $('#fields').html('<input type=\"text\" placeholder=\"Nombre del servicio\" id=\"name-S\" required><hr><input type=\"text\" placeholder=\"Precio del servicio\" id=\"price-S\" required><hr><br>');\n      $('#selSer').html('');\n\n      if (this.allServices[i].typeService == $('#selectedService').val()) {\n        this.name = this.allServices[i].typeService;\n        this.price = this.allServices[i].price;\n        this.id = this.allServices[i]._id;\n        console.log(this.allServices[i]);\n      }\n\n      $('#name-S').val(this.name);\n      $('#price-S').val(this.price);\n    }\n  }\n\n  onDelete(e) {\n    var r = window.confirm(\"Seguro que desea eliminar el servicio: \" + this.name + \"?\");\n\n    if (r == true) {\n      axios.delete('http://localhost:4000/students/deleteService/' + this.id, {\n        headers: {\n          authorization: 'Bearer ' + cookies.get('token')\n        }\n      }).then(res => {\n        this.props.history.push('/dashboard');\n      }).catch(error => {\n        console.log(error);\n      });\n    } else {}\n  }\n\n  onSubmit(e) {\n    var jsonService = {\n      name: $('#name-S').val(),\n      price: $('#price-S').val(),\n      id: this.id\n    };\n    axios.put('http://75.102.23.138:4000/students/update-service', jsonService).then(res => {\n      console.log('service successfully updated'); //this.props.history.push('/dashboard')\n    }).catch(error => {\n      console.log(error);\n      alert('Ha ocurrido un error :(');\n    });\n    console.log(jsonService); // Redirect to Student List \t\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"form-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(Form, {\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, \"Editar servicio \\u2193\"), React.createElement(\"select\", {\n      class: \"select\",\n      id: \"selectedService\",\n      onChange: this.onChangeService,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      id: \"selSer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, \"selecciona un servicio\")), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"ButtonTable\",\n      onClick: this.onDelete,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, \"Eliminar este servicio\"), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      id: \"fields\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }), React.createElement(Button, {\n      variant: \"danger\",\n      size: \"lg\",\n      block: \"block\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, \"Editar Servicio\")));\n  }\n\n}","map":{"version":3,"sources":["C:\\Users\\xtarg\\Desktop\\SystemAcountManager-main\\src\\components\\editService.component.js"],"names":["React","Component","Form","Button","axios","Cookies","$","cookies","EditService","constructor","props","name","price","service","id","allServices","onChangeService","bind","onDelete","onSubmit","componentDidMount","get","headers","authorization","then","res","data","map","append","typeService","push","console","log","catch","error","e","i","length","html","val","_id","r","window","confirm","delete","history","jsonService","put","alert","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Form from 'react-bootstrap/Form'\r\nimport Button from 'react-bootstrap/Button';\r\nimport axios from 'axios';\r\nimport Cookies from 'universal-cookie';\r\nimport $ from 'jquery'\r\nconst cookies = new Cookies()\r\n\r\nexport default class EditService extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.name = '';\r\n    this.price = '';\r\n    this.service = '';\r\n    this.id = '';\r\n    this.allServices = [];\r\n\r\n    this.onChangeService = this.onChangeService.bind(this);\r\n    this.onDelete = this.onDelete.bind(this);\r\n    this.onSubmit = this.onSubmit.bind(this);\r\n  }\r\n\r\n  componentDidMount(){\r\n    axios.get('http://localhost:4000/students/services/', {\r\n      headers: {\r\n        authorization: 'Bearer '+cookies.get('token')\r\n      }\r\n    })\r\n      .then(res => {\r\n        res.data.map(service => $('#selectedService').append('<option>'+service.typeService+'</option>'))\r\n        res.data.map(service => this.allServices.push(service))\r\n        console.log(this.allServices[1])\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      })\r\n  }\r\n\r\n  onChangeService(e) {\r\n    for(var i=0; i<this.allServices.length; i++){\r\n    \t$('#fields').html('<input type=\"text\" placeholder=\"Nombre del servicio\" id=\"name-S\" required><hr><input type=\"text\" placeholder=\"Precio del servicio\" id=\"price-S\" required><hr><br>')\r\n\t\t$('#selSer').html('')\r\n    \tif (this.allServices[i].typeService == $('#selectedService').val()) {\r\n    \t\tthis.name = this.allServices[i].typeService;\r\n    \t\tthis.price = this.allServices[i].price;\r\n    \t\tthis.id = this.allServices[i]._id;\r\n    \t\tconsole.log(this.allServices[i])\r\n    \t}\r\n    \t\r\n    \t$('#name-S').val(this.name)\r\n    \t$('#price-S').val(this.price)\r\n    }\r\n  }\r\n\r\n   onDelete(e){\r\n    var r = window.confirm(\"Seguro que desea eliminar el servicio: \"+this.name+\"?\");\r\n    if (r == true) {\r\n      axios.delete('http://localhost:4000/students/deleteService/'+this.id, {\r\n          headers: {\r\n              authorization: 'Bearer '+cookies.get('token')\r\n          }\r\n      })\r\n      .then((res) => {\r\n          this.props.history.push('/dashboard')\r\n      }).catch((error) => {\r\n          console.log(error)\r\n      })\r\n    } else {\r\n      \r\n    } \r\n  } \r\n\r\n  onSubmit(e){\r\n  \tvar jsonService = {\r\n  \t\tname: $('#name-S').val(),\r\n  \t\tprice: $('#price-S').val(),\r\n  \t\tid: this.id\r\n  \t}\r\n\r\n    axios.put('http://75.102.23.138:4000/students/update-service', jsonService)\r\n      .then((res) => {\r\n        console.log('service successfully updated')\r\n        //this.props.history.push('/dashboard')\r\n      }).catch((error) => {\r\n        console.log(error)\r\n        alert('Ha ocurrido un error :(')\r\n      })\r\n\r\n      console.log(jsonService)\r\n\r\n    // Redirect to Student List \t\r\n  }\r\n\r\n  render() {\r\n    return (<div className=\"form-wrapper\">\r\n      <Form onSubmit={this.onSubmit}>\r\n      \t<h3>Editar servicio ↓</h3>\r\n        <select class=\"select\" id=\"selectedService\" onChange={this.onChangeService}>\r\n        \t<option id=\"selSer\">selecciona un servicio</option>\r\n        </select>    \r\n        <hr />    \r\n        <button className=\"ButtonTable\" onClick={this.onDelete}>Eliminar este servicio</button>\r\n        <hr />\r\n        <div id=\"fields\"></div>\r\n\r\n        <Button variant=\"danger\" size=\"lg\" block=\"block\" type=\"submit\">\r\n          Editar Servicio\r\n        </Button>\r\n\r\n      </Form>\r\n    </div>);\r\n  }\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}