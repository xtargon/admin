{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\xtarg\\\\Desktop\\\\SystemAcountManager-main\\\\src\\\\components\\\\login.component.js\";\nimport React, { Component } from \"react\";\nimport { ReactSession } from 'react-client-session';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport axios from 'axios';\nimport Cookies from 'universal-cookie';\nimport { Redirect } from 'react-router';\nexport default class Login extends Component {\n  constructor(props) {\n    super(props); // Setting up functions\n\n    this.onChangeAdminName = this.onChangeAdminName.bind(this);\n    this.onChangeAdminPass = this.onChangeAdminPass.bind(this);\n    this.onSubmit = this.onSubmit.bind(this); // Setting up state\n\n    this.state = {\n      name: '',\n      pass: '',\n      logged: undefined,\n      token: undefined\n    };\n  }\n\n  onChangeAdminName(e) {\n    this.setState({\n      name: e.target.value\n    });\n  }\n\n  onChangeAdminPass(e) {\n    this.setState({\n      pass: e.target.value\n    });\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    const adminObject = {\n      name: this.state.name,\n      pass: this.state.pass\n    };\n    axios.post('http://' + window.location.host + ':4000/students/admin', adminObject).then(res => this.setState({\n      logged: res.data.id,\n      nameUser: res.data.name,\n      token: res.data.volatilToken\n    }));\n    this.setState({\n      name: '',\n      pass: ''\n    });\n  }\n\n  render() {\n    const logged = this.state.logged;\n    const token = this.state.token;\n    const nameUser = this.state.nameUser;\n\n    if (logged != undefined) {\n      ReactSession.setStoreType(\"localStorage\");\n      ReactSession.set(\"UserName\", nameUser);\n      ReactSession.set(\"admin\", true);\n      const cookies = new Cookies();\n      cookies.set('token', token, {\n        path: '/'\n      });\n      console.log(ReactSession.get(\"UserName\") + ' → ' + ReactSession.get(\"admin\"));\n      return React.createElement(Redirect, {\n        to: \"/dashboard\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: \"form-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(Form, {\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      controlId: \"Name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"Usuario\"), React.createElement(Form.Control, {\n      type: \"text\",\n      value: this.state.name,\n      onChange: this.onChangeAdminName,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      controlId: \"password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Contrase\\xF1a\"), React.createElement(Form.Control, {\n      type: \"password\",\n      value: this.state.pass,\n      onChange: this.onChangeAdminPass,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    })), React.createElement(Button, {\n      variant: \"primary\",\n      size: \"lg\",\n      block: \"block\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, \"Log-In\")));\n  }\n\n}\n/*console.log(res.data.volatilToken)*/","map":{"version":3,"sources":["C:\\Users\\xtarg\\Desktop\\SystemAcountManager-main\\src\\components\\login.component.js"],"names":["React","Component","ReactSession","Form","Button","axios","Cookies","Redirect","Login","constructor","props","onChangeAdminName","bind","onChangeAdminPass","onSubmit","state","name","pass","logged","undefined","token","e","setState","target","value","preventDefault","adminObject","post","window","location","host","then","res","data","id","nameUser","volatilToken","render","setStoreType","set","cookies","path","console","log","get"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport {ReactSession} from 'react-client-session';\r\nimport Form from 'react-bootstrap/Form'\r\nimport Button from 'react-bootstrap/Button';\r\nimport axios from 'axios';\r\nimport Cookies from 'universal-cookie';\r\nimport { Redirect } from 'react-router'\r\n\r\n\r\n\r\n\r\nexport default class Login extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    // Setting up functions\r\n    this.onChangeAdminName = this.onChangeAdminName.bind(this);\r\n    this.onChangeAdminPass = this.onChangeAdminPass.bind(this);\r\n    this.onSubmit = this.onSubmit.bind(this);\r\n\r\n    // Setting up state\r\n    this.state = {\r\n      name: '',\r\n      pass: '',\r\n      logged: undefined,\r\n      token : undefined\r\n    }\r\n  }\r\n  onChangeAdminName(e) {\r\n    this.setState({ name: e.target.value })\r\n  }\r\n\r\n  onChangeAdminPass(e) {\r\n    this.setState({ pass: e.target.value })\r\n  }\r\n\r\n  onSubmit(e) {\r\n    e.preventDefault()\r\n    const adminObject = {\r\n      name: this.state.name,\r\n      pass: this.state.pass\r\n    };\r\n\r\n    axios.post('http://'+window.location.host+':4000/students/admin', adminObject)\r\n      .then(res =>  this.setState({logged: res.data.id, nameUser:res.data.name, token: res.data.volatilToken}));\r\n\r\n    this.setState({\r\n      name: '',\r\n      pass: ''\r\n    });\r\n  }\r\n\r\n  render() {\r\n\r\n    const { logged } = this.state\r\n    const { token } = this.state\r\n    const { nameUser } = this.state\r\n\r\n     if (logged != undefined) {\r\n        ReactSession.setStoreType(\"localStorage\");\r\n        ReactSession.set(\"UserName\", nameUser);\r\n        ReactSession.set(\"admin\", true);\r\n\r\n        const cookies = new Cookies()\r\n        cookies.set('token', token, { path: '/' })\r\n      \r\n        console.log(ReactSession.get(\"UserName\") +' → '+ ReactSession.get(\"admin\"))\r\n        return <Redirect to='/dashboard'/>;\r\n     }\r\n\r\n    return (<div className=\"form-wrapper\">\r\n      <Form onSubmit={this.onSubmit}>\r\n        <Form.Group controlId=\"Name\">\r\n          <Form.Label>Usuario</Form.Label>\r\n          <Form.Control type=\"text\" value={this.state.name} onChange={this.onChangeAdminName} />\r\n        </Form.Group>\r\n\r\n        <Form.Group controlId=\"password\">\r\n          <Form.Label>Contraseña</Form.Label>\r\n          <Form.Control type=\"password\" value={this.state.pass} onChange={this.onChangeAdminPass} />\r\n        </Form.Group>\r\n\r\n        <Button variant=\"primary\" size=\"lg\" block=\"block\" type=\"submit\">\r\n          Log-In\r\n        </Button>\r\n      </Form>\r\n    </div>);\r\n  }\r\n\r\n}\r\n\r\n/*console.log(res.data.volatilToken)*/"]},"metadata":{},"sourceType":"module"}